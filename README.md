# Kartica Flashcards

Простое SPA для изучения слов с помощью флешкарточек. Приложение адаптировано под мобильные устройства, может быть установлено как PWA и поддерживает кастомизацию темы через Telegram WebApp API.

## Требования

- Node.js 18+
- Утилита `sqlite3` (используется для применения миграций и сидов)

## Установка зависимостей

```bash
npm install
```

## Локальный запуск

1. Примените миграции и запустите сервер:
   ```bash
   npm start
   ```
   При первом запуске сервер автоматически создаст файл базы данных `prisma/dev.db` и применит миграцию.
2. Откройте приложение по адресу `http://localhost:3000`. Бэкенд отдаёт как API, так и статические файлы фронтенда, поэтому дополнительный фронтенд-сервер не требуется.
3. Документация API доступна по адресу `http://localhost:3000/api/docs`, OpenAPI-спецификация — по `http://localhost:3000/api/openapi.yaml`.

### Сидинг тестовых данных

Чтобы наполнить базу тестовой группой карточек «English», выполните:

```bash
npm run seed
```

Скрипт перезапишет содержимое таблиц и создаст 20 карточек с фразовыми глаголами.

### Переменные окружения

- `PORT` — порт HTTP-сервера (по умолчанию `3000`).
- `DATABASE_URL` — путь к файлу SQLite (по умолчанию `file:./prisma/dev.db`).

## Запуск в Docker

1. Соберите образ:
   ```bash
   docker build -t kartica .
   ```
2. Запустите контейнер:
   ```bash
   docker run -p 3000:3000 kartica
   ```
   При старте контейнер выполнит миграции и сидинговый скрипт, после чего запустит бэкенд, который раздаёт статический фронтенд и API.

## Обновление и деплой

Для выката на сервер достаточно собрать Docker-образ из репозитория и запустить его на целевой инфраструктуре. При каждом запуске контейнера база данных будет автоматически создана (если её ещё нет) и заполнена демо-данными из сида; для сохранения состояния используйте volume, примонтированный к `/app/prisma`.
