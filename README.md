# Kartica Flashcards

Современное SPA на Vite + Vue для изучения слов с помощью флешкарточек. Интерфейс адаптирован под мобильные устройства, может быть установлен как PWA и поддерживает кастомизацию темы через Telegram WebApp API.

## Требования

- Node.js 18+
- npm 9+

## Клиент (Vite + Vue)

1. Установите зависимости:
   ```bash
   npm install
   ```
2. Запустите режим разработки с горячей перезагрузкой:
   ```bash
   npm run dev
   ```
   По умолчанию приложение будет доступно по адресу, который напечатает Vite (обычно `http://localhost:5173`).
   Чтобы клиент обращался к API, создайте файл `.env` в корне фронтенда (или `.env.local`) и задайте адрес сервера:
   ```bash
   echo "VITE_API_BASE_URL=http://localhost:4000" >> .env
   ```
   Если переменная не указана, приложение попробует подключиться к `http://localhost:4000`.
3. Для предпросмотра production-сборки выполните:
   ```bash
   npm run build
   npm run preview
   ```

Сервис-воркер регистрируется автоматически после загрузки страницы, поэтому приложение можно установить как PWA.

## API (Express + Prisma)

API находится в директории `api/` и использует SQLite-базу данных (файл `api/prisma/dev.db`).

### Подготовка базы данных

1. Перейдите в папку API:
   ```bash
   cd api
   ```
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Примените миграции (при первом запуске создастся файл базы данных):
   ```bash
   npx prisma migrate dev --name init
   ```
4. Заполните базу стартовыми данными:
   ```bash
   npm run seed
   ```
   Скрипт создаст группу «Английский. Животные» с 20 карточками.

### Запуск сервера

```bash
npm run dev
```

По умолчанию сервер слушает порт `4000`.

### Маршруты

- `GET /groups` — список групп с пагинацией (`page`, `pageSize`).
- `GET /groups/:id` — подробности группы и связанные карточки.
- `GET /cards` — список карточек с пагинацией (`page`, `pageSize`).
- `GET /cards/:id` — отдельная карточка.

Все маршруты работают без дополнительного middleware.

## Совместный запуск клиента и API

1. Запустите API (см. раздел выше), по умолчанию он слушает порт `4000`.
2. В отдельном терминале запустите фронтенд (`npm run dev`).
3. Откройте приложение Vite; список групп и карточки будут подгружаться из базы данных через API с поддержкой пагинации.
